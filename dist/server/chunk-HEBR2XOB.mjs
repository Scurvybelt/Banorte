import './polyfills.server.mjs';
import{c as b,d as q}from"./chunk-EZWESG3W.mjs";import{a as h,b as d,c as T,e as _,g as x,h as m,i as p,j as u,k as w}from"./chunk-4KZRSLMR.mjs";var M=_((G,y)=>{"use strict";if(!globalThis.DOMException)try{let{MessageChannel:e}=T("worker_threads"),t=new e().port1,r=new ArrayBuffer;t.postMessage(r,[r,r])}catch(e){e.constructor.name==="DOMException"&&(globalThis.DOMException=e.constructor)}y.exports=globalThis.DOMException});var F=x(M(),1);import{statSync as O,createReadStream as C,promises as E}from"fs";import{basename as z}from"path";var j=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function v(e){if(j(e)!=="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:(t.constructor&&t.constructor.toString())===Object.toString()}var g=v;var P=function(e,t,r,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},a=function(e,t,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:t.get(e)},s,c,D="The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.",f=class e{constructor(t){s.set(this,void 0),c.set(this,void 0),P(this,s,t.path,"f"),P(this,c,t.start||0,"f"),this.name=z(a(this,s,"f")),this.size=t.size,this.lastModified=t.lastModified}slice(t,r){return new e({path:a(this,s,"f"),lastModified:this.lastModified,size:r-t,start:t})}stream(){return u(this,null,function*(){let{mtimeMs:t}=yield new p(E.stat(a(this,s,"f")));if(t>this.lastModified)throw new F.default(D,"NotReadableError");this.size&&(yield*w(C(a(this,s,"f"),{start:a(this,c,"f"),end:a(this,c,"f")+this.size-1})))})}get[(s=new WeakMap,c=new WeakMap,Symbol.toStringTag)](){return"File"}};function S(e,{mtimeMs:t,size:r},o,i={}){let n;g(o)?[i,n]=[o,void 0]:n=o;let l=new f({path:e,size:r,lastModified:t});return n||(n=l.name),new b([l],n,d(h({},i),{lastModified:l.lastModified}))}function N(e,t,r={}){let o=O(e);return S(e,o,t,r)}function H(e,t,r){return m(this,null,function*(){let o=yield E.stat(e);return S(e,o,t,r)})}export{H as fileFromPath,N as fileFromPathSync,q as isFile};
